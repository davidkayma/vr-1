<div class="showIfLessonComplete" style="display: none;">

    <div class="js-lesson_buttons"></div>

    <br>
    <hr>
  
    <!-- VIDEO WINDOWS -->
    <div class="lesson_video_center lesson_vid">
      <div class="explanation_video lesson_vid"><%= render 'explanation' %></div>
    </div>

    <div class="prompt_video lesson_vid"><%= render 'prompt' %></div>
    <div class="model_video lesson_vid"><%= render 'rolemodel' %></div>

    <div class="lesson_video_left lesson_vid">
    </div>

    <div class="lesson_video_right lesson_vid">
    </div>

    <div class="lesson_video_rehearsal lesson_vid ">
        <div class="rehearsal_video lesson_vid"><%= render 'rehearsal' %></div>
    </div>




    <!-- PREVIOUS && NEXT -->
    <a href="<%= course_topic_lesson_path(@course, @topic, @lesson.id-1)%>">
      <button class="blue lesson_previous">PREVIOUS LESSON</button>
    </a>
    <a href="<%= course_topic_lesson_path(@course, @topic, @lesson.id+1)%>">
      <button class="blue lesson_next" style="float: right;">NEXT LESSON</button>
    </a>

    <script type="text/javascript"> allLessons('<%= @lesson.id %>','<%= @lessons_arr %>') </script>
    <br>
    <br>
    
    <div class="list_of_lesson_rehearsals">
        <% rehearsals_for_this_lesson.each do |rehearsal| %>
            <% @this_video_token = rehearsal.video_token %>
            <% @this_added_class = 'rehearsal_'+rehearsal.id.to_s %>
            <div class="rehearsal_thumbnail">
            <button class="rehearsal_btn" data-toggle="modal" data-target="#<%= @this_added_class %>" >
                Rehearsal <%= (rehearsals_for_this_lesson.index(rehearsal)+1).to_s %><br>
                <%= render './shared/ziggeothumbnail' %>
            </button>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="<%= @this_added_class %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
              <div class="modal-dialog" role="document">
                <div class="modal-content rehearsal_modal">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h2 class="modal-title" id="myModalLabel">Rehearsal <%= (rehearsals_for_this_lesson.index(rehearsal)+1).to_s %></h2>
                  </div>
                  <div class="modal-body">
                    <%= render './shared/ziggeoplayer' %>
                  </div>
                  <div class="modal-footer">
                    
                    <%= form_tag "rehearsal_#{rehearsal.id.to_s}", html: {id: "rehearsal_#{rehearsal.id.to_s}"} do %>
                        <%= text_field_tag :this_rehearsal_id, nil, type:"hidden", value:rehearsal.id.to_s %>
                        <%= text_field_tag :submission, nil, type:"hidden", value:true %>
                        <%= submit_tag 'Submit for Feedback', class:'blue' %>
                    <% end %>

                    <!-- <button type="button" class="blue submission_<%= rehearsal.id %>" data-dismiss="modal">Submit for Feedback</button> -->

                    <button type="button" class="green_sft" data-dismiss="modal">Edit</button>
                    <button type="button" class="red" data-dismiss="modal">Delete</button>
                  </div>
                </div>
              </div>
            </div>

            <script>
                $("#rehearsal_<%= rehearsal.id %>").submit(function(event){
                    event.preventDefault();
                    
                    // var rehearsal = new Object();
                    // rehearsal.submission = true;

                    $.ajax({
                        type:'PUT',
                        url:'/rehearsals/<%= rehearsal.id.to_s %>/api',
                        // data:rehearsal,
                        success: function(data){
                          console.log(data);
                        }
                    });
                });
            </script>
        <% end %>
    </div>





    
    <br>
    <br>


</div>